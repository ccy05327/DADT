<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Health Statistics</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="/styles/style.css" />
</head>

<body>
    <h1>Health Statistics Analysis</h1>
    <section id="statistics">
        <h2>Overview</h2>
        <table border="1" cellspacing="0" cellpadding="10">
            <thead>
                <tr>
                    <th>Statistic</th>
                    <th>Value</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Total Records</td>
                    <td>
                        <%= stats.totalRecords %>
                    </td>
                </tr>
                <tr>
                    <td>Total Countries</td>
                    <td>
                        <%= stats.totalCountries %>
                    </td>
                </tr>
                <tr>
                    <td>Total Years</td>
                    <td>
                        <%= stats.totalYears %>
                    </td>
                </tr>
                <tr>
                    <td>Total Age Groups</td>
                    <td>
                        <%= stats.totalAgeGroups %>
                    </td>
                </tr>
                <tr>
                    <td>Total Sex Categories</td>
                    <td>
                        <%= stats.totalSexCategories %>
                    </td>
                </tr>
                <tr>
                    <td>Total Mortality</td>
                    <td>
                        <%= stats.totalMortality %>
                    </td>
                </tr>
                <tr>
                    <td>Average Mortality Per Year</td>
                    <td>
                        <%= stats.avgMortalityPerYear %>
                    </td>
                </tr>
                <tr>
                    <td>Maximum Mortality</td>
                    <td>
                        <%= stats.maxMortality %>
                    </td>
                </tr>
                <tr>
                    <td>Minimum Mortality</td>
                    <td>
                        <%= stats.minMortality %>
                    </td>
                </tr>
                <tr>
                    <td>Average Death Rate</td>
                    <td>
                        <%= stats.avgDeathRate %>
                    </td>
                </tr>
                <tr>
                    <td>Average Death Rate Across All Records</td>
                    <td>
                        <%= stats.avgDeathRate %>
                    </td>
                </tr>
                <tr>
                    <td>Maximum Death Rate Recorded</td>
                    <td>
                        <%= stats.maxDeathRate %>
                    </td>
                </tr>
                <tr>
                    <td>Minimum Death Rate Recorded</td>
                    <td>
                        <%= stats.minDeathRate %>
                    </td>
                </tr>
                <tr>
                    <td>Average Percentage of Cause-Specific Deaths</td>
                    <td>
                        <%= stats.avgCauseSpecific %>
                    </td>
                </tr>
                <tr>
                    <td>Maximum Percentage of Cause-Specific Deaths</td>
                    <td>
                        <%= stats.maxCauseSpecific %>
                    </td>
                </tr>
                <tr>
                    <td>Earliest Year in the Database</td>
                    <td>
                        <%= stats.earliestYear %>
                    </td>
                </tr>
                <tr>
                    <td>Latest Year in the Database</td>
                    <td>
                        <%= stats.latestYear %>
                    </td>
                </tr>
                <tr>
                    <td>Percentage of Rows with Missing Mortality Data</td>
                    <td>
                        <%= stats.percentMissingMortality %>%
                    </td>
                </tr>
                <tr>
                    <td>Percentage of Rows with Missing Death Rate Data</td>
                    <td>
                        <%= stats.percentMissingDeathRate %>%
                    </td>
                </tr>
                <tr>
                    <td>Countries with Complete Data Across All Years</td>
                    <td>
                        <%= stats.countriesWithCompleteData %>
                    </td>
                </tr>
                <tr>
                    <td>Region with the Most Mortality Data</td>
                    <td>
                        <%= stats.regionWithMostMortalityData %>
                    </td>
                </tr>
                <tr>
                    <td>Country with the Highest Total Mortality</td>
                    <td>
                        <%= stats.countryWithHighestTotalMortality %>
                    </td>
                </tr>
            </tbody>
        </table>
    </section>
    <!-- Question 1: Mortality by Region -->
    <section>
        <h2>1. Mortality by Region</h2>
        <label for="regionSelectQ1">Select Region:</label>
        <select id="regionSelectQ1">
            <option value="" disabled selected>Select a region</option>
            <% regions.forEach(region=> { %>
                <option value="<%= region.RegionName %>">
                    <%= region.RegionName %>
                </option>
                <% }); %>
        </select>
        <button id="showDataBtnQ1">Show Data</button>
        <canvas id="deathRateChartQ1" width="400" height="200"></canvas>
    </section>

    <!-- Question 2: Mortality by Age Group in Regions -->
    <section>
        <h2>2. Mortality by Age Group in Regions</h2>
        <label for="regionSelectQ2">Select a Region to Highlight:</label>
        <select id="regionSelectQ2">
            <option value="" disabled selected>Select a region</option>
            <% regions.forEach(region=> { %>
                <option value="<%= region.RegionName %>">
                    <%= region.RegionName %>
                </option>
                <% }); %>
        </select>
        <label for="ageGroupSelect">Select Age Group:</label>
        <select id="ageGroupSelect">
            <option value="" disabled selected>Select an age group</option>
            <option value="0-9">0-9</option>
            <option value="10-19">10-19</option>
            <option value="20-29">20-29</option>
            <option value="30-39">30-39</option>
            <option value="40-49">40-49</option>
            <option value="50-59">50-59</option>
            <option value="60-69">60-69</option>
            <option value="70-79">70-79</option>
            <option value="80+">80+</option>
        </select>
        <button id="showDataBtnQ2">Show Data</button>
        <canvas id="deathRateChartQ2" width="400" height="200"></canvas>
        <div id="noDataMessage" style="display: none; color: red; text-align: center;">No data from the selected
            properties</div>
    </section>

    <!-- Question 3: Gender Difference in Mortality by Region -->
    <section>
        <h2>3. Gender Difference in Mortality by Region</h2>
        <label for="regionSelectQ3">Select Region:</label>
        <select id="regionSelectQ3">
            <option value="" disabled selected>Select a region</option>
            <% regions.forEach(region=> { %>
                <option value="<%= region.RegionName %>">
                    <%= region.RegionName %>
                </option>
                <% }); %>
        </select>
        <button id="showDataBtnQ3">Show Data</button>
        <canvas id="deathRateChartQ3" width="400" height="200"></canvas>
    </section>

    <!-- Question 4: Yearly Mortality by Country -->
    <section>
        <h2>4. Yearly Mortality by Country</h2>
        <div>Only the top 15 countries that has the most data coverage across years are available </div>
        <label for="countrySelectQ4">Select Country:</label>
        <select id="countrySelectQ4">
            <option value="" disabled selected>Select a country</option>
            <% Q4countries.forEach(country=> { %>
                <option value="<%= country.CountryName %>">
                    <%= country.CountryName %>
                </option>
                <% }); %>
        </select>
        <label for="yearSelectStartQ4">Start Year:</label>
        <select id="yearSelectStartQ4">
            <option value="" selected>All Years</option>
            <% yearOptions.forEach(year=> { %>
                <option value="<%= year.Year %>">
                    <%= year.Year %>
                </option>
                <% }); %>
        </select>
        
        <label for="yearSelectEndQ4">End Year:</label>
        <select id="yearSelectEndQ4">
            <option value="" selected>All Years</option>
            <% yearOptions.forEach(year=> { %>
                <option value="<%= year.Year %>">
                    <%= year.Year %>
                </option>
                <% }); %>
        </select>
        <button id="showDataBtnQ4">Show Data</button>
        <canvas id="deathRateChartQ4" width="400" height="200"></canvas>
    </section>

    <script src="/scripts/scriptQ1.js"></script>
    <script src="/scripts/scriptQ2.js"></script>
    <script src="/scripts/scriptQ3.js"></script>
    <script src="/scripts/scriptQ4.js"></script>
</body>

</html>